// AUTO-COMPAT SHIM — временный слой совместимости

import * as RIK from "./rik_api";
export * from "./rik_api";
export const RIK_API = RIK;
export { uploadProposalAttachment } from "./files";

export type Supplier = {
  id: string;
  name: string;
  phone?: string | null;
  email?: string | null;
  inn?: string | null;
  bank_account?: string | null;
  specialization?: string | null;
  contact_name?: string | null;
  website?: string | null;
  address?: string | null;
  notes?: string | null;
};

export async function listSuppliers(q?: string) {
  const anyRIK = RIK as any;
  if (anyRIK?.listSuppliers) return anyRIK.listSuppliers(q);
  return [];
}

export async function upsertSupplier(payload: Partial<Supplier> & { id?: string }) {
  const anyRIK = RIK as any;
  if (anyRIK?.upsertSupplier) return anyRIK.upsertSupplier(payload);
  return { id: payload.id ?? "temp", name: (payload as any)?.name ?? "" };
}

export async function listSupplierFiles(supplierId: string) {
  const anyRIK = RIK as any;
  if (anyRIK?.listSupplierFiles) return anyRIK.listSupplierFiles(supplierId);
  return [];
}
